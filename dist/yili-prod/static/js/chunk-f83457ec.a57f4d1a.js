(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f83457ec"],{1163:function(e,a,t){var l=t("15ec");"string"===typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);var o=t("499e").default;o("591276ae",l,!0,{sourceMap:!1,shadowMode:!1})},"15ec":function(e,a,t){a=e.exports=t("7b4b")(!1),a.push([e.i,"blockquote[data-v-28a34a0b],body[data-v-28a34a0b],dd[data-v-28a34a0b],dl[data-v-28a34a0b],dt[data-v-28a34a0b],fieldset[data-v-28a34a0b],h1[data-v-28a34a0b],h2[data-v-28a34a0b],h3[data-v-28a34a0b],h4[data-v-28a34a0b],h5[data-v-28a34a0b],h6[data-v-28a34a0b],input[data-v-28a34a0b],ol[data-v-28a34a0b],p[data-v-28a34a0b],pre[data-v-28a34a0b],td[data-v-28a34a0b],textarea[data-v-28a34a0b],th[data-v-28a34a0b],ul[data-v-28a34a0b]{font-family:PingFangSC-Regular,PingFangSC-Medium,Microsoft YaHei,Helvetica Neue,Droid Sans,Droid Sans Fallback,Heiti SC,Hiragino Sans GB,Simsun,sans-self,serif;margin:0;padding:0;font-size:14px}body[data-v-28a34a0b],html[data-v-28a34a0b]{overflow:hidden}body .el-table colgroup.gutter[data-v-28a34a0b],body .el-table th.gutter[data-v-28a34a0b]{display:table-cell!important}table[data-v-28a34a0b]{border-collapse:collapse;border-spacing:0;empty-cells:show}ul[data-v-28a34a0b]{list-style:none}input[data-v-28a34a0b]:-webkit-autofill,select[data-v-28a34a0b]:-webkit-autofill,textarea[data-v-28a34a0b]:-webkit-autofill{-webkit-text-fill-color:#606266!important;-webkit-box-shadow:0 0 0 1000px transparent inset!important;background-color:transparent;background-image:none;-webkit-transition:background-color 50000s ease-in-out 0s;transition:background-color 50000s ease-in-out 0s}.el-select--medium[data-v-28a34a0b]{vertical-align:bottom!important}.el-select__input[data-v-28a34a0b]{vertical-align:baseline}input[data-v-28a34a0b]{background-color:transparent}input[data-v-28a34a0b]:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px transparent inset!important;-webkit-text-fill-color:#606266!important}.bg-white[data-v-28a34a0b]{background:#fff}.pl24[data-v-28a34a0b]{padding-left:24px}.pd16[data-v-28a34a0b]{padding:16px}.pd24[data-v-28a34a0b]{padding:24px}.pd24_1[data-v-28a34a0b],.pdl24[data-v-28a34a0b]{padding-left:24px}.pd24_1[data-v-28a34a0b]{padding-bottom:24px}.tc[data-v-28a34a0b]{text-align:center}.tr[data-v-28a34a0b]{text-align:right}.white[data-v-28a34a0b]{color:#fff}.flex[data-v-28a34a0b]{display:-webkit-box;display:-ms-flexbox;display:flex}.flex-center-between[data-v-28a34a0b]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.flex-center[data-v-28a34a0b],.flex-center-between[data-v-28a34a0b]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.flex-center[data-v-28a34a0b]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.flex-around[data-v-28a34a0b]{-ms-flex-pack:distribute;justify-content:space-around}.flex-center-around[data-v-28a34a0b]{-ms-flex-pack:distribute;justify-content:space-around}.flex-center-around[data-v-28a34a0b],.flex-center-end[data-v-28a34a0b]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.flex-center-end[data-v-28a34a0b]{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.flex-center-start[data-v-28a34a0b]{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ml5[data-v-28a34a0b]{margin-left:5px}.ml10[data-v-28a34a0b]{margin-left:10px}.ml15[data-v-28a34a0b]{margin-left:15px}.ml20[data-v-28a34a0b]{margin-left:20px}.mr10[data-v-28a34a0b]{margin-right:10px}.mr20[data-v-28a34a0b]{margin-right:20px}.mt10[data-v-28a34a0b]{margin-top:10px}.mt16[data-v-28a34a0b]{margin-top:16px}.mt20[data-v-28a34a0b]{margin-top:20px}.mt24[data-v-28a34a0b]{margin-top:24px}.mb16[data-v-28a34a0b]{margin-bottom:16px}.mb20[data-v-28a34a0b]{margin-bottom:20px}.mb24[data-v-28a34a0b]{margin-bottom:24px}.p15[data-v-28a34a0b]{padding:15px}.p20[data-v-28a34a0b]{padding:20px}.p25[data-v-28a34a0b]{padding:25px}.pt10[data-v-28a34a0b]{padding-top:10px}.pt30[data-v-28a34a0b]{padding-top:30px}.pr20[data-v-28a34a0b]{padding-right:20px}.pb24[data-v-28a34a0b]{padding-bottom:24px}.el-drawer__body[data-v-28a34a0b]{overflow:auto!important}.pointer[data-v-28a34a0b]{cursor:pointer}img[data-v-28a34a0b]{border:0}textarea[data-v-28a34a0b]{resize:none}caption[data-v-28a34a0b],th[data-v-28a34a0b]{text-align:left}em[data-v-28a34a0b],i[data-v-28a34a0b]{font-style:normal}hr[data-v-28a34a0b]{margin-top:0;margin-bottom:0}a[data-v-28a34a0b]:focus{outline:none!important}a[data-v-28a34a0b]{text-decoration:none!important;color:#2393f7}.el-drawer[data-v-28a34a0b]:focus,button[data-v-28a34a0b]:focus,input[data-v-28a34a0b]:focus{outline:none;-moz-outline:none}.__view[data-v-28a34a0b]{width:0!important}.form-bg[data-v-28a34a0b]{width:100%;overflow:hidden;background:#f9fbfc;padding:0 10px 0 10px;border-radius:3px}.form-bg .el-input.is-disabled .el-input__inner[data-v-28a34a0b]{color:#303133;font-size:14px}.form-bg .el-textarea__inner[data-v-28a34a0b]{font-size:14px}.form-bg .el-textarea.is-disabled .el-textarea__inner[data-v-28a34a0b]{color:#303133;font-size:14px}.w-100[data-v-28a34a0b]{width:100%!important}.t-l[data-v-28a34a0b]{text-align:left}.list-search[data-v-28a34a0b]{width:100%}.el-icon-document-copy[data-v-28a34a0b]{vertical-align:middle;margin-right:5px!important;width:24px;text-align:center;font-size:18px}.title-size[data-v-28a34a0b]{overflow:visible!important;visibility:visible!important;height:57px!important}.el-submenu__icon-arrow.el-icon-arrow-right[data-v-28a34a0b]{display:block!important}.el-submenu__icon-arrow.el-icon-arrow-right .el-menu-item.is-active[data-v-28a34a0b]{text-align:center!important}.color-blue[data-v-28a34a0b]{color:#0070c1}.el-menu--collapse[data-v-28a34a0b]{width:auto}.common-footer-box[data-v-28a34a0b]{width:98%;position:fixed;bottom:0;left:0;background:#fff;padding:20px;-webkit-box-shadow:0 -4px 8px 0 rgba(0,0,0,.1);box-shadow:0 -4px 8px 0 rgba(0,0,0,.1);z-index:10}.common-footer[data-v-28a34a0b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.common-footer-content[data-v-28a34a0b]{margin-left:14%;width:77%}.ft18[data-v-28a34a0b]{font-size:18px}.ft16[data-v-28a34a0b]{font-size:16px}.ft10[data-v-28a34a0b]{padding-top:20px;font-size:14px}.ft25[data-v-28a34a0b]{font-size:25px}.el-dialog__header[data-v-28a34a0b]{padding:13px 20px;border-bottom:1px solid #dee0e3}.el-tree-node[data-v-28a34a0b],.is-expanded[data-v-28a34a0b],.is-focusable[data-v-28a34a0b]{color:#606266}.is-current[data-v-28a34a0b]{color:#2393f7}.bg100[data-v-28a34a0b]{height:100px}li[data-v-28a34a0b]{list-style:none}.el-menu--popup-right-start[data-v-28a34a0b]{margin-left:0}.el-step__description.is-finish[data-v-28a34a0b]{color:#303133}.el-step__title.is-finish[data-v-28a34a0b]{color:#303133!important}.el-step__head.is-finish[data-v-28a34a0b]{color:#303133;border-color:#303133}.el-step__description.is-wait[data-v-28a34a0b],.el-step__title.is-wait[data-v-28a34a0b]{color:#303133}.el-step__head.is-wait[data-v-28a34a0b]{color:#303133;border-color:#303133}.el-step__line[data-v-28a34a0b]{background-color:#303133}.el-tooltip__popper[data-v-28a34a0b]{max-width:20%}.underline[data-v-28a34a0b]{text-decoration:underline;color:#2393f7}.modlue-box[data-v-28a34a0b]{width:100%;height:100%;position:fixed;z-index:20}.viewOffice[data-v-28a34a0b]{height:90%;position:fixed}.vue-treeselect--disabled .vue-treeselect__control[data-v-28a34a0b]{background-color:#f5f7fa;height:32px!important}.vue-treeselect__control[data-v-28a34a0b]{height:32px}.vue-treeselect__menu[data-v-28a34a0b]{max-height:250px!important}.vue-treeselect--disabled .vue-treeselect__single-value[data-v-28a34a0b]{color:#303133;font-size:13px}.modlue-box .el-loading-spinner .circular[data-v-28a34a0b]{display:none}.modlue-box .el-loading-spinner .el-loading-text[data-v-28a34a0b]{font-size:16px}.radio-cont[data-v-28a34a0b]{padding:20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.setradio[data-v-28a34a0b]{padding-bottom:14px}.setradio .el-radio[data-v-28a34a0b]{padding:0;width:100%;background:#fff}.setradio .el-radio[data-v-28a34a0b],.setradio .el-radio__input[data-v-28a34a0b]{white-space:normal}.setradio .el-radio__label[data-v-28a34a0b]{padding:0}.setradio .el-radio.is-bordered.is-checked[data-v-28a34a0b]{border:2px solid #409eff}.setradio .el-radio-group[data-v-28a34a0b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.setradio .el-radio__input[data-v-28a34a0b]{padding:0;margin:0;position:absolute;bottom:-25px;left:45%}.setradio .el-radio__input .el-radio__inner[data-v-28a34a0b]{width:16px;height:16px}.radio-img img[data-v-28a34a0b]{width:50px}.radio-rig[data-v-28a34a0b]{margin-left:10px}.radio-rig span[data-v-28a34a0b]{display:block;font-size:16px;font-weight:600;color:#1f2329;margin-bottom:10px}.radio-rig p[data-v-28a34a0b]{display:none;font-size:12px;color:#8f959e;letter-spacing:0;text-align:justify;line-height:18px}.el-radio:hover .hind[data-v-28a34a0b]{display:block}.box-solid-bt[data-v-28a34a0b]{border-bottom:1px solid #eee;margin-bottom:16px}.border-top[data-v-28a34a0b]{margin-top:15px;padding-top:15px}.border-top[data-v-28a34a0b],.tp-das[data-v-28a34a0b]{border-top:1px dashed #d9d9d9}#over-select .el-select__tags-text[data-v-28a34a0b]{display:inline-block;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#over-select .el-select .el-tag__close.el-icon-close[data-v-28a34a0b]{top:-5px}.el-submenu__title[data-v-28a34a0b]{border:none}.vue-treeselect__menu-container[data-v-28a34a0b],.vue-treeselect__portal-target[data-v-28a34a0b]{z-index:90000000000000!important}.el-tag.el-tag--info[data-v-28a34a0b]{color:#303133;font-size:14px}.workflow .resetButton[data-v-28a34a0b]{border:1px solid #bbbfc4}.workflow .tableCol[data-v-28a34a0b],.workflow .tableColQuery[data-v-28a34a0b]{color:#2393f7;cursor:pointer}.workflow .tableCol[data-v-28a34a0b]{margin-left:12px}",""])},"97ae":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix flex flex-center-between",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审批节点配置")])]),t("el-row",{staticClass:"bg-white"},[t("el-col",{attrs:{span:24}},[t("el-form",{attrs:{model:e.searchForm,"label-width":"100px","label-position":"left"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"审批节点",prop:"nodeName"}},[t("el-input",{attrs:{placeholder:"请审批节点"},model:{value:e.searchForm.nodeName,callback:function(a){e.$set(e.searchForm,"nodeName",a)},expression:"searchForm.nodeName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则名称",prop:"nodeDesc"}},[t("el-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.searchForm.nodeDesc,callback:function(a){e.$set(e.searchForm,"nodeDesc",a)},expression:"searchForm.nodeDesc"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"iconfont sbt_add"},on:{click:function(a){return e.handlerCurrentPage(1)}}},[e._v("查询")])],1)],1)],1)],1),t("el-button",{attrs:{type:"primary"},on:{click:e.addRule}},[e._v("新增")]),t("el-table",{staticStyle:{width:"99%"},attrs:{data:e.tableData,"highlight-current-row":!0}},[t("el-table-column",{attrs:{type:"index",width:"60",label:"序号"}}),t("el-table-column",{attrs:{prop:"nodeCode",label:"审批节点编码"}}),t("el-table-column",{attrs:{prop:"nodeName",label:"审批节点名称"}}),t("el-table-column",{attrs:{prop:"nodeDesc",label:"规则名称"}}),t("el-table-column",{attrs:{prop:"orgName",label:"关联组织部门"}}),t("el-table-column",{attrs:{prop:"roleName",label:"关联角色"}}),t("el-table-column",{attrs:{prop:"ruleName",label:"关联固定规则"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.viewInfo(a.row)}}},[e._v("详情")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteRule(a.row)}}},[e._v("删除")])]}}])})],1),t("common-pagination",{attrs:{list:e.pager2},on:{"handler-currentPage":e.handlerCurrentPage}})],1)],1)],1),t("el-dialog",{attrs:{title:"审批节点",visible:e.dlgVisiable,width:"600px"},on:{"update:visible":function(a){e.dlgVisiable=a}}},[t("el-form",{ref:"ruleForm",attrs:{"label-width":"120px",rules:e.rules,model:e.selectNode}},[t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"审批节点编码",prop:"nodeCode"}},[t("el-input",{model:{value:e.selectNode.nodeCode,callback:function(a){e.$set(e.selectNode,"nodeCode",a)},expression:"selectNode.nodeCode"}})],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"审批节点名称",prop:"nodeName"}},[t("el-input",{model:{value:e.selectNode.nodeName,callback:function(a){e.$set(e.selectNode,"nodeName",a)},expression:"selectNode.nodeName"}})],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"规则名称",prop:"nodeDesc"}},[t("el-input",{model:{value:e.selectNode.nodeDesc,callback:function(a){e.$set(e.selectNode,"nodeDesc",a)},expression:"selectNode.nodeDesc"}})],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"节点类型",prop:"nodeType"}},[t("commonSelect",{attrs:{dictCode:"NODE_TYPE",placeholder:"请选择节点类型"},model:{value:e.selectNode.nodeType,callback:function(a){e.$set(e.selectNode,"nodeType",a)},expression:"selectNode.nodeType"}})],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"允许调整审批人",prop:"fixedNode"}},[t("el-select",{attrs:{clearable:""},model:{value:e.selectNode.fixedNode,callback:function(a){e.$set(e.selectNode,"fixedNode",a)},expression:"selectNode.fixedNode"}},[t("el-option",{attrs:{label:"允许",value:"Y"}}),t("el-option",{attrs:{label:"禁止",value:"N"}})],1)],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"完成条件",prop:"completedInstances"}},[t("el-select",{attrs:{clearable:""},model:{value:e.selectNode.completedInstances,callback:function(a){e.$set(e.selectNode,"completedInstances",a)},expression:"selectNode.completedInstances"}},[t("el-option",{attrs:{label:"全部",value:"-1"}}),t("el-option",{attrs:{label:"单人审批完成",value:"1"}})],1)],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"精确/族群",prop:"dataPrecision"}},[t("CommonSelect",{attrs:{dictCode:"DATA_PRECISION",clearable:!0,filterable:!0,placeholder:"请选择"},model:{value:e.selectNode.dataPrecision,callback:function(a){e.$set(e.selectNode,"dataPrecision",a)},expression:"selectNode.dataPrecision"}})],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"是否全员",prop:"dataAll"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.selectNode.dataAll,callback:function(a){e.$set(e.selectNode,"dataAll",a)},expression:"selectNode.dataAll"}},[t("el-option",{attrs:{label:"是",value:"Y"}}),t("el-option",{attrs:{label:"否",value:"N"}})],1)],1)],1),"ROLE"==e.selectNode.nodeType?t("el-col",[t("el-form-item",{attrs:{label:"关联组织部门",prop:"orgName"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.chooseOrgs}},[e._v("选择")]),t("div",e._l(e.orgs,function(a,l){return t("el-tag",{key:l,attrs:{closable:"",type:"success"},on:{close:function(t){return e.closeOrgTag(a,l)}}},[e._v("\n              "+e._s(a)+"\n            ")])}),1)],1)],1):e._e(),"ROLE"==e.selectNode.nodeType?t("el-col",[t("el-form-item",{attrs:{label:"关联角色",prop:"roleName"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.chooseRoles}},[e._v("选择")]),t("div",e._l(e.roles,function(a,l){return t("el-tag",{key:l,attrs:{closable:"",type:"success"},on:{close:function(t){return e.closeRoleTag(a,l)}}},[e._v("\n              "+e._s(a)+"\n            ")])}),1)],1)],1):e._e(),"RULE"==e.selectNode.nodeType?t("el-col",[t("el-form-item",{attrs:{label:"关联固定规则",prop:"ruleName"}},[t("el-tag",{directives:[{name:"show",rawName:"v-show",value:""!=e.selectNode.ruleName&&void 0!=e.selectNode.ruleName,expression:"selectNode.ruleName!=''&&selectNode.ruleName!= undefined"}],attrs:{closable:""},on:{close:function(a){return e.closeRuleTag()}}},[e._v(e._s(e.selectNode.ruleName))]),t("el-button",{attrs:{type:"primary"},on:{click:e.chooseRule}},[e._v("选择")])],1)],1):e._e(),t("el-col",[t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary",disabled:e.btnClickFlag},on:{click:e.saveRule}},[e._v("保存")]),t("el-button",{on:{click:function(a){e.dlgVisiable=!1}}},[e._v("关闭")])],1)])],1)],1)],1),t("el-dialog",{attrs:{title:"选择角色",width:"50%",visible:e.dlgRoleVisible,"append-to-body":""},on:{"update:visible":function(a){e.dlgRoleVisible=a}}},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-form",{attrs:{model:e.roleSearchOption,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"角色编号",prop:"roleCode"}},[t("el-input",{staticClass:"input-edit-role",attrs:{placeholder:"请输入所属编号"},model:{value:e.roleSearchOption.roleCode,callback:function(a){e.$set(e.roleSearchOption,"roleCode",a)},expression:"roleSearchOption.roleCode"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{staticClass:"input-edit-role",model:{value:e.roleSearchOption.roleName,callback:function(a){e.$set(e.roleSearchOption,"roleName",a)},expression:"roleSearchOption.roleName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"角色类型",prop:"roleType"}},[t("el-select",{staticClass:"input-edit-role",attrs:{"value-key":"value",placeholder:"请选择"},model:{value:e.roleSearchOption.roleType,callback:function(a){e.$set(e.roleSearchOption,"roleType",a)},expression:"roleSearchOption.roleType"}},e._l(e.roleTypes,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.getRoles(1)}}},[e._v("查 询")])],1)],1)],1)],1)],1),t("div",{staticClass:"div-table-roles"},[t("el-table",{ref:"roleTables",staticStyle:{width:"100%"},attrs:{data:e.rolesData,height:"450"}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"roleCode",label:"角色编号","min-width":"15%"}}),t("el-table-column",{attrs:{prop:"roleName",label:"角色名称","min-width":"25%"}}),t("el-table-column",{attrs:{prop:"roleType",label:"角色类型","min-width":"10%"}}),t("el-table-column",{attrs:{prop:"service",label:"系统来源","min-width":"10%"}})],1),t("common-pagination",{attrs:{list:e.roleSearchOption},on:{"handler-currentPage":e.getRoles}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dlgRoleVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"选择组织",width:"50%",visible:e.dlgOrgVisible,"append-to-body":""},on:{"update:visible":function(a){e.dlgOrgVisible=a}}},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-form",{attrs:{model:e.orgSearchOption,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"组织编号",prop:"orgCode"}},[t("el-input",{staticClass:"input-edit-role",attrs:{placeholder:"请输入编号"},model:{value:e.orgSearchOption.orgCode,callback:function(a){e.$set(e.orgSearchOption,"orgCode",a)},expression:"orgSearchOption.orgCode"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"组织名称",prop:"orgName"}},[t("el-input",{staticClass:"input-edit-role",model:{value:e.orgSearchOption.orgName,callback:function(a){e.$set(e.orgSearchOption,"orgName",a)},expression:"orgSearchOption.orgName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.getOrgs(1)}}},[e._v("查 询")])],1)],1)],1)],1)],1),t("div",{staticClass:"div-table-roles"},[t("el-table",{ref:"orgTables",staticStyle:{width:"100%"},attrs:{data:e.orgsData,height:"450"}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"orgCode",label:"组织编号","min-width":"15%"}}),t("el-table-column",{attrs:{prop:"orgName",label:"组织名称","min-width":"25%"}}),t("el-table-column",{attrs:{prop:"simpleName",label:"组织简称","min-width":"25%"}})],1),t("common-pagination",{attrs:{list:e.orgSearchOption},on:{"handler-currentPage":e.getOrgs}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dlgOrgVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addOrg}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"选择规则",width:"50%",visible:e.dlgRuleVisible,"append-to-body":""},on:{"update:visible":function(a){e.dlgRuleVisible=a}}},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-form",{attrs:{model:e.orgSearchOption,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("CommonSelect",{attrs:{dictCode:"RULE_TYPE",clearable:!0,filterable:!0,placeholder:"请选择"},model:{value:e.ruleSearchOption.ruleType,callback:function(a){e.$set(e.ruleSearchOption,"ruleType",a)},expression:"ruleSearchOption.ruleType"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.ruleSearchOption.ruleName,callback:function(a){e.$set(e.ruleSearchOption,"ruleName",a)},expression:"ruleSearchOption.ruleName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.getRules(1)}}},[e._v("查 询")])],1)],1)],1)],1)],1),t("div",{staticClass:"div-table-roles"},[t("el-table",{ref:"ruleTables",staticStyle:{width:"100%"},attrs:{data:e.ruleData,height:"450"},on:{"current-change":e.handleCurrentChange,"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"ruleCode",label:"规则编码"}}),t("el-table-column",{attrs:{prop:"ruleName",label:"规则名称"}}),t("el-table-column",{attrs:{prop:"ruleDesc",label:"规则描述"}}),t("el-table-column",{attrs:{prop:"ruleType",label:"规则类型"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("DictCodeToDictName",{attrs:{parentCode:"RULE_TYPE",dictCode:e.row.ruleType}})]}}])})],1),t("common-pagination",{attrs:{list:e.ruleSearchOption},on:{"handler-currentPage":e.getRules}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dlgRuleVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addRuleSelect}},[e._v("确 定")])],1)])],1)},o=[],r=t("448a"),i=t.n(r),n=t("3156"),s=t.n(n),d=t("3317"),c=t("b775"),p={data:function(){return{LOGIN_URL:"http://10.114.11.48/api/isump",loading:!1,btnClickFlag:!1,dlgVisiable:!1,dlgRoleVisible:!1,dlgOrgVisible:!1,dlgRuleVisible:!1,selectNode:{},orgsData:[],tableData:[],ruleData:[],searchForm:{},roleForm:{currentPage:1,pageSize:10,total:0},orgForm:{currentPage:1,pageSize:10,total:0},pager2:{currentPage:1,pageSize:10,total:0},rules:{nodeCode:[{required:!0,message:"请选择审批节点编码",trigger:"blur"}],nodeName:[{required:!0,message:"请输入审批节点名称",trigger:"blur"}],nodeDesc:[{required:!0,message:"请输入规则名称",trigger:"blur"}],nodeType:[{required:!0,message:"请选择规则类型",trigger:"blur"}]},roleTypes:[{value:"function",label:"function"},{value:"data",label:"data"},{value:"approval",label:"approval"}],roleSearchOption:{service:null,roleName:null,currentPage:1,pageSize:10},orgSearchOption:{orgCode:"",orgName:"",currentPage:1,pageSize:10},ruleSearchOption:{currentPage:1,pageSize:10},rolesData:[],pager:{currentPage:1,total:0,pageSize:10},roles:[],orgs:[],nodeRules:[]}},created:function(){},mounted:function(){this.handlerCurrentPage(1)},methods:{handlerCurrentPage:function(e){var a=this;this.pager2.currentPage=e.currentPage||e,this.pager2.pageSize=e.pageSize||this.pager2.pageSize;var t=s()({},this.pager2,this.searchForm);d["a"].queryRuleList(t).then(function(e){"000000"===e.code&&(a.tableData=e.data.records,a.pager2.currentPage=e.data.pageNo,a.pager2.total=e.data.total)}).catch(function(e){a.$message({type:"error",message:"查询节点信息出错"})})},addRule:function(){this.dlgVisiable=!0,this.selectNode={nodeType:"",completedInstances:"-1",fixedNode:"Y"}},viewInfo:function(e){this.dlgVisiable=!0,this.selectNode=e,this.roles=e.roleName?e.roleName.split(","):[],this.orgs=e.orgName?e.orgName.split(","):[],this.nodeRules=e.ruleName?e.ruleName.split(","):[]},saveRule:function(){var e=this;this.$refs.ruleForm.validate(function(a){if(a){if("RULE"===e.selectNode.nodeType&&!e.selectNode.ruleCode)return void e.$message({type:"warning",message:"请选择固定规则"});if("RULE"!==e.selectNode.nodeType&&!e.selectNode.orgCode&&!e.selectNode.roleCode)return void e.$message({type:"warning",message:"请选择组织或角色"});d["a"].saveRuleInfo(e.selectNode).then(function(a){"000000"===a.code&&(e.$message({type:"success",message:"操作成功"}),e.dlgVisiable=!1,e.handlerCurrentPage(1))}).catch(function(a){e.$message({type:"error",message:"保存节点信息出错"})})}})},deleteRule:function(e){var a=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d["a"].deleteRuleInfo(e).then(function(e){"000000"===e.code&&(a.$message({type:"success",message:"操作成功"}),a.handlerCurrentPage(1))}).catch(function(e){a.$message({type:"error",message:"删除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},chooseRoles:function(){this.dlgRoleVisible=!0,this.getRoles(1)},getRoles:function(e){var a=this;this.roleSearchOption.currentPage=e.currentPage||e,c["a"].post("/isump/role/page/conditions",this.roleSearchOption,{baseURL:this.LOGIN_URL}).then(function(e){var t=e.data;a.roleSearchOption.total=t.total,a.roleSearchOption.currentPage=t.current,a.roleSearchOption.pageSize=t.size,a.rolesData=i()(t.records)})},addRole:function(){var e=this.$refs.roleTables.selection;if(!e||e.length<1)return this.$message({message:"请至少选择一条数据",type:"warning"});var a=!0,t=!1,l=void 0;try{for(var o,r=e[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var i=o.value;this.roles.push(i)}}catch(p){t=!0,l=p}finally{try{a||null==r.return||r.return()}finally{if(t)throw l}}var n=[],s=[],d=[],c=[];this.roles.forEach(function(e){n.indexOf(e.roleId)>0||(n.push(e.roleId),s.push(e.roleName),d.push(e.roleCode),c.push(e.roleName))}),this.selectNode.roleCode=d.join(","),this.selectNode.roleId=n.join(","),this.selectNode.roleName=s.join(","),this.roles=[].concat(c),this.dlgRoleVisible=!1},closeRoleTag:function(e,a){this.roles.splice(a,1);var t=this.selectNode.roleCode.split(","),l=this.selectNode.roleId.split(","),o=this.selectNode.roleName.split(",");l.splice(a,1),t.splice(a,1),o.splice(a,1),this.selectNode.roleCode=t.join(","),this.selectNode.roleId=l.join(","),this.selectNode.roleName=o.join(",")},chooseOrgs:function(){this.dlgOrgVisible=!0,this.getOrgs(1)},getOrgs:function(e){var a=this;this.orgSearchOption.currentPage=e.currentPage||e,c["a"].post("/isump/organization/page/conditions",this.orgSearchOption,{baseURL:this.LOGIN_URL}).then(function(e){var t=e.data;a.orgSearchOption.total=t.total,a.orgSearchOption.currentPage=t.current,a.orgSearchOption.pageSize=t.size,a.orgsData=i()(t.records)})},addOrg:function(){var e=this.$refs.orgTables.selection;if(!e||e.length<1)return this.$message({message:"请至少选择一条数据",type:"warning"});var a=!0,t=!1,l=void 0;try{for(var o,r=e[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var i=o.value;this.orgs.push(i)}}catch(p){t=!0,l=p}finally{try{a||null==r.return||r.return()}finally{if(t)throw l}}var n=[],s=[],d=[],c=[];this.orgs.forEach(function(e){n.indexOf(e.orgId)>0||(n.push(e.orgId),s.push(e.orgName),d.push(e.orgCode),c.push(e.orgName))}),this.selectNode.orgCode=d.join(","),this.selectNode.orgId=n.join(","),this.selectNode.orgName=s.join(","),this.orgs=[].concat(c),this.dlgOrgVisible=!1},closeOrgTag:function(e,a){this.orgs.splice(a,1);var t=this.selectNode.orgCode.split(","),l=this.selectNode.orgName.split(",");t.splice(a,1),l.splice(a,1),this.selectNode.orgCode=t.join(","),this.selectNode.orgName=l.join(",")},chooseRule:function(){this.dlgRuleVisible=!0,this.getRules(1)},closeRuleTag:function(){var e=s()({},this.selectNode);e.ruleCode="",e.ruleName="",e.ruleId="",this.selectNode=e},addRuleSelect:function(){var e=this.$refs.ruleTables.selection;if(!e||e.length<1)return this.$message({message:"请选择一条数据",type:"warning"});this.selectNode.ruleCode=e[0].ruleCode,this.selectNode.ruleName=e[0].ruleName,this.selectNode.ruleId=e[0].ruleId,this.dlgRuleVisible=!1},handleSelectionChange:function(e){e.length>1&&(this.$refs.ruleTables.clearSelection(),this.$refs.ruleTables.toggleRowSelection(e.pop()))},handleCurrentChange:function(e){this.$refs.ruleTables.clearSelection(),this.$refs.ruleTables.toggleRowSelection(e)},getRules:function(e){var a=this;this.ruleSearchOption.currentPage=e.currentPage||e,this.ruleSearchOption.pageSize=e.pageSize||this.ruleSearchOption.pageSize,d["a"].queryApprovalList(this.ruleSearchOption).then(function(e){"000000"===e.code&&(a.ruleData=e.data.records,a.ruleSearchOption.currentPage=e.data.current,a.ruleSearchOption.total=e.data.total)}).catch(function(e){a.$message({type:"error",message:"查询固定规则信息出错"})})}}},b=p,u=(t("ae80"),t("a6c2")),g=Object(u["a"])(b,l,o,!1,null,"28a34a0b",null);a["default"]=g.exports},ae80:function(e,a,t){"use strict";var l=t("1163"),o=t.n(l);o.a}}]);